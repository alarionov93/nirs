==Конструкторская часть==

===Проектирование схемотехнических решений===
//TODO: стырить у Оли!
[[Структурная_схема_робота.png]]

===Проектирование ПО микроконтроллера===
//TODO: стырить Оле у меня!

Алгоритмы работы.
// TODO: вставить алгоритмы

== Автомат рук ==

[[Автомат_рук.png]]

Если автомат в момент 0 находится в состоянии "инициализация", а входное воздействие равно "0", то следующее состояние будет равно "инициально опустить руки".При пребывании автомата в состоянии "инициально опустить руки" в момент времени 1 имея на входе воздействие "нажат к.в.", автомат сменит состояние на "остановка".При пребывании автомата в состоянии "начать движ. вниз" в момент времени 2 имея на входе воздействие "время > 10 сек", автомат сменит состояние на "ошибка".При пребывании автомата в состоянии "начать движ. вниз" в момент времени 3 имея на входе воздействие "к.в. отпущен", автомат сменит состояние на "продолжить опускать руки".В момент времени 4 автомат перешел в состояние "продолжить опускать руки", и входное воздействие равно "время > 10 сек", то он перейдет в состояние "ошибка".
Если в момент времени 5 автомат находится в состоянии "продолжить опускать руки" при входном воздействии "к.в. нажат", то он перейдёт в состояние "остановка".В момент времени 6 робот находится в состоянии "начать движ. вверх", и при входном воздействии "время > 10 сек", он переходит в состояние "ошибка".В момент времени 7 робот находится в состоянии "начать движ. вверх", и при входном воздействии "к.в. отпущен", он переходит в состояние "продолжить поднимать руки".Если в момент времени 8 автомат находится в состоянии "продолжить поднимать руки" при входном воздействии "время > 10 сек", то он перейдёт в состояние "ошибка".В момент времени 9 автомат перешел в состояние "продолжить поднимать руки", и входное воздействие равно "к.в. нажат", то он перейдет в состояние "остановка".
В момент 10 автомат пребывает в состоянии "остановка", и, получив воздействие "0", он перейдет в состояние "ожидание".При пребывании автомата в состоянии "ожидание" в момент времени 11 имея на входе воздействие "принята команда вниз", автомат сменит состояние на "начать движ. вниз".Если автомат в момент 12 находится в состоянии "ожидание", а входное воздействие равно "принята команда вверх", то следующее состояние будет равно "начать движ. вверх".

== Автомат_Голова ==

[[Автомат_Голова.png]]

Если автомат в момент 0 находится в состоянии "инициализация", а входное воздействие равно "0", то следующее состояние будет равно "установка в начальное положение".Если в момент времени 1 автомат находится в состоянии "установка в начальное положение" при входном воздействии "требуемый угол достигнут", то он перейдёт в состояние "начальное положение установлено".При пребывании автомата в состоянии "начальное положение установлено" в момент времени 2 имея на входе воздействие "угол < требуемый", автомат сменит состояние на "поворот на Х градусов в горизонтальной плоскости".Если в момент времени 3 автомат находится в состоянии "начальное положение установлено" при входном воздействии "угол < требуемый", то он перейдёт в состояние "поворот на Х градусов в вертикальной плоскости".
В момент времени 4 робот находится в состоянии "поворот на Х градусов в горизонтальной плоскости", и при входном воздействии "требуемый угол достигнут", он переходит в состояние "поворот завершен".Если в момент времени 5 автомат находится в состоянии "поворот на Х градусов в вертикальной плоскости" при входном воздействии "требуемый угол достигнут", то он перейдёт в состояние "поворот завершен".При пребывании автомата в состоянии "поворот на Х градусов в вертикальной плоскости" в момент времени 6 имея на входе воздействие "требуемый угол достигнут", автомат сменит состояние на "поворот завершен".Если в момент времени 7 автомат находится в состоянии "поворот на Х градусов в вертикальной плоскости" при входном воздействии "требуемый угол достигнут", то он перейдёт в состояние "поворот завершен".
== Автомат_Комп ==
[[ Автомат_Комп.png ]]
Если автомат в момент 0 находится в состоянии "инициализация", а входное воздействие равно "0", то следующее состояние будет равно "компьютер выключен".В момент времени 1 автомат перешел в состояние "компьютер выключен", и входное воздействие равно "0", то он перейдет в состояние "компьютер включается".В момент 2 автомат пребывает в состоянии "компьютер включается", и, получив воздействие "0", он перейдет в состояние "компьютер загружается".В момент времени 3 робот находится в состоянии "компьютер загружается", и при входном воздействии "получено подтверждающая последовательность", он переходит в состояние "компьютер загрузился".Если автомат в момент 4 находится в состоянии "компьютер загружается", а входное воздействие равно "превышено время ожидания", то следующее состояние будет равно "компьютер не загрузился".

== Автомат_Лампы ==
[[ Автомат_Лампы.png ]]
Если автомат в момент 0 находится в состоянии "инициализация", а входное воздействие равно "0", то следующее состояние будет равно "выключить все лампы".В момент 1 автомат пребывает в состоянии "выключить все лампы", и, получив воздействие "получено подтверждение включения компьютера", он перейдет в состояние "включить белые лампы".В момент времени 2 робот находится в состоянии "выключить все лампы в качестве сигнала об ошибке", и при входном воздействии "не получено подтверждение включения компьютера за 10 сек.|счетчик включений < 5|счетчик времени включенных ламп < Х", он переходит в состояние "включить все лампы".В момент времени 3 автомат перешел в состояние "включить все лампы", и входное воздействие равно "счетчик времени выключенных ламп < Х", то он перейдет в состояние "выключить все лампы в качестве сигнала об ошибке".
При пребывании автомата в состоянии "включить все лампы" в момент времени 4 имея на входе воздействие "счетчик включений > 5", автомат сменит состояние на "выключить все лампы".При пребывании автомата в состоянии "выключить все лампы" в момент времени 5 имея на входе воздействие "поехали вперед", автомат сменит состояние на "включить белые лампы".Если автомат в момент 6 находится в состоянии "выключить все лампы", а входное воздействие равно "поехали назад", то следующее состояние будет равно "включить красные лампы".При пребывании автомата в состоянии "включить белые лампы" в момент времени 7 имея на входе воздействие "остановились", автомат сменит состояние на "выключить все лампы".
При пребывании автомата в состоянии "включить красные лампы" в момент времени 8 имея на входе воздействие "остановились", автомат сменит состояние на "выключить все лампы".При пребывании автомата в состоянии "выключить все лампы" в момент времени 9 имея на входе воздействие "поехали вперед направо", автомат сменит состояние на "включить белую лампу справа".При пребывании автомата в состоянии "выключить все лампы" в момент времени 10 имея на входе воздействие "поехали назад направо", автомат сменит состояние на "включить красную лампу справа".В момент 11 автомат пребывает в состоянии "выключить все лампы", и, получив воздействие "поехали вперед налево", он перейдет в состояние "включить белую лампу слева".
Если автомат в момент 12 находится в состоянии "выключить все лампы", а входное воздействие равно "поехали назад налево", то следующее состояние будет равно "включить красную лампу слева".При пребывании автомата в состоянии "включить белую лампу справа" в момент времени 13 имея на входе воздействие "остановились", автомат сменит состояние на "выключить все лампы".В момент 14 автомат пребывает в состоянии "включить красную лампу справа", и, получив воздействие "остановились", он перейдет в состояние "выключить все лампы".

== Автомат_Обход препятствий ==

[[Автомат_Обход_препятствий.png]]

Если автомат в момент 0 находится в состоянии "стоим", а входное воздействие равно "потребность", то следующее состояние будет равно "захотели ехать".Если автомат в момент 1 находится в состоянии "захотели ехать", а входное воздействие равно "нет_препятствий(прямо)", то следующее состояние будет равно "ехать прямо".В момент времени 2 робот находится в состоянии "захотели ехать", и при входном воздействии "нет препятствий справа", он переходит в состояние "ехать направо".Если автомат в момент 3 находится в состоянии "захотели ехать", а входное воздействие равно "нет препятствий слева", то следующее состояние будет равно "ехать налево".В момент 4 автомат пребывает в состоянии "ехать прямо", и, получив воздействие "нет препятствий справа", он перейдет в состояние "ехать направо".В момент 5 автомат пребывает в состоянии "ехать прямо", и, получив воздействие "нет препятствий слева", он перейдет в состояние "ехать налево".При пребывании автомата в состоянии "ехать направо" в момент времени 6 имея на входе воздействие "нет препятствий прямо", автомат сменит состояние на "ехать прямо".
Если в момент времени 7 автомат находится в состоянии "ехать налево" при входном воздействии "нет препятствий прямо", то он перейдёт в состояние "ехать прямо".

====Обработка датчиков расстояния====
[[Датчики.png]]

[[Обработка_датчиков_расстояния.png]]

Ветка ожидание:
Блок 1: проверка состояния датчика расстояния.
Входы: состояние датчика
Выходы: направление дальнейшей работы (ожидание, триггер, эхо).

Блок 2: проверка времени ожидания.
Входы: время ожидания t (mс).
Выходы: если t > 1000mc, то истина, иначе ложь

Блок 3: состояние датчика := триггер
Входы: переменная состояния
Выходы: состояние датчика

Ветка триггер:
Блок 4: проверка состояния триггера
Входы: состояние датчика
Выходы: фронт вниз; фронт вверх; ожидание;

Блок 5: проверка времени импульса
Входы: фронт вниз
Выходы: если время импульса больше 10 мс, то истина, иначе - ложь

Блок 6: выставить низкий уровень на выходе триггера
Входы: -
Выходы: состояние выхода триггера

Блок 7: состояние триггера := ожидание
Входы: -
Выходы: состояние триггера

Блок 8: состояние := эхо
Входы: -
Выходы: состояние датчика

Блок 9: выставить высокий уровень на выходе триггера
Входы: фронт вверх
Выходы: состояние выхода триггера

Блок 10: состояние триггера := фронт вниз
Входы: -
Выходы: состояние триггера

Блок 11: состояние триггера := фронт вверх
Входы: -
Выходы: состояние триггера

Ветка 3:
Блок 12: проверка состояния эхо
Входы: состояние датчика
Выходы: фронт вверх; фронт вниз; ожидание;

Блок 13: проверить уровень на входе эхо по фронту вверх
Входы: уровень
Выходы: если низкий, то истина, иначе - ложь

Блок 14: проверить уровень на входе эхо по фронту вниз
Входы: уровень
Выходы: если низкий, то истина, иначе - ложь

Блок 15: вычислить расстояние
Входы: длительность импульса
Выходы: расстояние

Блок 16: состояние эхо := фронт вниз
Входы: состояние эхо
Выходы: состояние эхо

Блок 17: запомнить момент прихода импульса
Входы: импульс
Выходы: время прихода импульса

Блок 18: состояние эхо := фронт вверх
Входы: состояние эхо
Выходы: состояние эхо

====Основной алгоритм программы микроконтроллера====

Блок 1: инициализация устройств и подсистем
Входы: -
Выходы: состояние портов ввода/вывода, вектора прерываний

Блок 2: основной управляющий алгоритм
Входы: состояние датчиков, команды о бортовой эвм
Выходы: управляющее воздействие, ответы о выполнении команд

==== Инициализция устройств ====

Блок 1:Инициализация последовательного порта
Входы: - 
Выходы: состояние последовательного порта (RX/TX), прерывания

Блок 2: Инициализация реле компьютера
Входы: -
Выходы: состояния пинов реле

Блок 3: Инициализация светотехники
Входы: -
Выходы: состояние пинов реле светотехники

Блок 4: Инициализация шины I2C 
Входы: -
Выходы: состояние шины I2C

Блок 5: Инициализация сети 5V
Входы:
Выходы: состояние пинов реле цепи 5V

Блок 6: Инициализация реле моторов и их включение
Входы:
Выходы: состояние пинов драйверов моторов

Блок 7: Инициализация таймеров
Входы:
Выходы: состояние регистров таймеров

Блок 8: Инициализация портов
Входы:
Выходы: состояние портов

Блок 9: Инициализация АЦП
Входы:
Выходы: состояние регистров АЦП

==== Обработчик прерывания по первому таймеру ====

Блок 1: Сброс счетчика регистра прерываний
Входы: Счетчик
Выходы: Счетчик = 0

Блок 2: Обработка команд управления компьютером
Входы: Команда
Выходы:	Результат выполнения

Блок 3: Обработка команд управления светотехникой
Входы: Команда
Выходы:	Результат выполнения

Блок 4: Обработка команд управления руками
Входы: Команда
Выходы:	Результат выполнения

Блок 5: Обработка команд управления ногами
Входы: Команда
Выходы:	Результат выполнения

[[Обработчик_прерывания_по_первому_таймеру.png]]

==== Обработчик прерывания по второму таймеру ====

Блок 1: Сброс счетчика регистра прерываний
Входы: Счетчик
Выходы: Счетчик = 0

Блок 2: Счетчик импульсов датчиков расстояния += 1
Входы: Счетчик
Выходы: Значение счетчика, увеличенное на единицу

Блок 3: Обработка команд управления датчиками расстояния
Входы: Команда
Выходы:	Результат выполнения

[[Обработчик_прерывания_повторому_таймеру.png]]

==== Инициализация гироскопа (рассчет дрейфа) ====

Блок 1: Инициализация
Входы: Переменная суммы значений
Выходы: Переменная суммы значений

Блок 2: первичное измерение вращательного ускорения по оси z
Входы: переменная для хранения
Выходы: измеренное значение

Блок 3: инициализация цикла
Входы: переменная счетчик цикла
Выходы:	-

Блок 4: задержка 0.3 сек
Входы: 
Выходы:

Блок 5: новое измерение ускорения по z
Входы: переменная для хранения значения
Выходы: значение

Блок 6: подсчет суммы измерений
Входы: переменная суммы
Выходы: значение суммы

Блок 7: конец цикла
Входы: -
Выходы: переменная счетчик

Блок 8: подсчет дрейфа
Входы: переменная для хранения значения дрейфа
Выходы: значение дрейфа

===Проектирование ПО бортовой ЭВМ робота===
[[Система_питания.png]]

Генератор бреда.

===Проектирование системы управления движением===
[[Исполнительные_механизмы.png]]
====Стабилизация курса====
====Стабилизация траектории====
====Стабилизация скорости====
===Проектирование системы управления «жестикуляцией» робота===
[[Устройства_ЧМВ.png]]